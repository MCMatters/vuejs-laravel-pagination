!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueLaravelPagination=t():e.VueLaravelPagination=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r.n(n),a=r(4),s=r(2),o=s(i.a,a.a,!1,null,null,null);t.default=o.exports},function(e,t){e.exports=function(e,t,r,n,i,a){var s,o=e=e||{},u=typeof e.default;"object"!==u&&"function"!==u||(s=e,o=e.default);var l="function"==typeof o?o.options:o;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId=i);var c;if(a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):n&&(c=n),c){var p=l.functional,h=p?l.render:l.beforeCreate;p?(l._injectStyles=c,l.render=function(e,t){return c.call(t),h(e,t)}):l.beforeCreate=h?[].concat(h,c):[c]}return{esModule:s,exports:o,options:l}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{resourceUrl:{type:String,required:!0},options:{type:Object,required:!1,default:function(){return{}}},axios:{required:!1,default:function(){return window.axios}},bus:{type:Object,default:function(){return VueBus||{$on:function(){}}}}},created:function(){this.updateConfig(!0),this.historyModeEnabled?(window.onpopstate=this.handleBrowserBackButton,this.fetchData(this.normalizeUrl(this.resourceUrl,this.$route.query))):this.fetchData()},mounted:function(){var e=this;this.bus.$on("update-pagination-items",function(t){t=t||e.current_page,e.fetchData(e.normalizeUrl(e.resourceUrl,{page:t}))})},beforeDestroy:function(){this.bus.$off("update-pagination-items")},data:function(){return{current_page:"",last_page:"",next_page_url:"",prev_page_url:"",config:{remote_data:"data",remote_current_page:"current_page",remote_last_page:"last_page",remote_next_page_url:"next_page_url",remote_prev_page_url:"prev_page_url",previous_button_text:"&laquo;",next_button_text:"&raquo;",onEachSide:3,historyMode:!1,divider:"...",hideIfEmpty:!0,params:{},headers:{},convertBooleanToInteger:!1}}},methods:{fetchData:function(e){var t=this,r=this.transformPageUrl(e),n=r.url,i=r.params;i=Object.assign({},this.config.params,i);var a={};Object.keys(i).forEach(function(e){void 0!==i[e]&&void 0!==i[e]&&null!==i[e]&&(a[e]=t.convertBooleanToInteger(i[e]))}),this.$emit("beforeRequest"),this.axios.get(n,{headers:this.config.headers,params:a}).then(function(e){var r=e.data;t.handleResponseData(r),t.pushHistory(a)}).catch(function(e){t.$emit("failed",e)})},handleResponseData:function(e){this.makePagination(e);var t=this.getNestedValue(e,this.config.remote_data);this.$emit("update",t)},pushHistory:function(e){this.historyModeEnabled&&this.$router.replace({query:e})},makePagination:function(e){this.current_page=this.getNestedValue(e,this.config.remote_current_page),this.last_page=this.getNestedValue(e,this.config.remote_last_page),this.next_page_url=this.current_page===this.last_page?null:this.getNestedValue(e,this.config.remote_next_page_url),this.prev_page_url=1===this.current_page?null:this.getNestedValue(e,this.config.remote_prev_page_url)},updateConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.config=Object.assign({},this.config,this.$options.config||{},this.options),this.historyModeEnabled&&(this.config.params=e?Object.assign({},this.config.params,this.$route.query):Object.assign({},this.$route.query,this.config.params))},transformPageUrl:function(e){e=this.normalizeUrl(e||this.resourceUrl);var t=e.split("?");return 2===t.length?{url:t[0],params:this.getObjectFromQueryParams(t[1])}:{url:t[0],params:{}}},getNestedValue:function(e,t){if(!t)return e;var r=t;t=t.split(".");for(var n=e,i=0;i<t.length;i++)n=n[t[i]];return void 0===n&&console.log("[VueJsLaravelPagination] Response doesn't contain key "+r+"!"),n},convertBooleanToInteger:function(e){return this.config.convertBooleanToInteger&&"boolean"==typeof e?+e:e},handleBrowserBackButton:function(e){if(this.$route.path===e.target.location.pathname){var t=this.$route.fullPath.split("?");t.length<2?this.fetchData():this.fetchData(this.normalizeUrl(this.resourceUrl,t.pop()))}},getObjectFromQueryParams:function(e){var t={};return"string"==typeof e||e instanceof String?(e.split("&").forEach(function(e){e=e.split("="),t[e[0]]=e[1]||""}),t):e||{}},transformQuery:function(e){var t=this,r=[];return Object.keys(e).forEach(function(n){r.push(n+"="+t.convertBooleanToInteger(e[n]))}),r},normalizeUrl:function(e,t){var r=e.split("?"),n={};t=this.getObjectFromQueryParams(t),r.length>1&&(n=this.getObjectFromQueryParams(r.pop()));var i=Object.assign({},t,n),a=this.transformQuery(i).join("&");return a?r[0]+"?"+a:e}},computed:{elements:function(){var e=this.config.onEachSide,t=this.config.divider,r=[];if(this.last_page<2*e+6){for(var n=1;n<=this.last_page;n++)r.push({key:n,item:this.normalizeUrl(this.resourceUrl,{page:n})});return r}var i=2*e;if(this.current_page<=i){for(var a=1;a<=i+2;a++)r.push({key:a,item:this.normalizeUrl(this.resourceUrl,{page:a})});r.push({key:"divider",item:t});for(var s=this.last_page-1;s<=this.last_page;s++)r.push({key:s,item:this.normalizeUrl(this.resourceUrl,{page:s})});return r}if(this.current_page>this.last_page-i){for(var o=1;o<=2;o++)r.push({key:o,item:this.normalizeUrl(this.resourceUrl,{page:o})});r.push({key:"divider",item:t});for(var u=this.last_page-(i+2);u<=this.last_page;u++)r.push({key:u,item:this.normalizeUrl(this.resourceUrl,{page:u})});return r}for(var l=1;l<=2;l++)r.push({key:l,item:this.normalizeUrl(this.resourceUrl,{page:l})});r.push({key:"divider",item:t});for(var c=this.current_page-e;c<=this.current_page+e;c++)r.push({key:c,item:this.normalizeUrl(this.resourceUrl,{page:c})});r.push({key:"divider",item:t});for(var p=this.last_page-1;p<=this.last_page;p++)r.push({key:p,item:this.normalizeUrl(this.resourceUrl,{page:p})});return r},historyModeEnabled:function(){return!(!this.config.historyMode||!this.$router)},nextPageUrl:function(){return this.normalizeUrl(this.resourceUrl,{page:this.current_page+1})},prevPageUrl:function(){return this.normalizeUrl(this.resourceUrl,{page:this.current_page-1})}},watch:{resourceUrl:function(){this.fetchData()},options:{handler:function(){this.updateConfig()},deep:!0}}}},function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{directives:[{name:"show",rawName:"v-show",value:!e.config.hideIfEmpty||!(e.config.hideIfEmpty&&!e.next_page_url&&!e.prev_page_url),expression:"!config.hideIfEmpty || !(config.hideIfEmpty && !next_page_url && !prev_page_url)"}],staticClass:"pagination vl-pagination"},[r("li",{staticClass:"page-item",class:{disabled:1==e.current_page}},[1==e.current_page?r("span",{staticClass:"page-link",domProps:{innerHTML:e._s(e.config.previous_button_text)}}):r("a",{staticClass:"page-link",attrs:{href:"#",rel:"prev"},domProps:{innerHTML:e._s(e.config.previous_button_text)},on:{click:function(t){return t.preventDefault(),e.fetchData(e.prevPageUrl)}}})]),e._v(" "),e._l(e.elements,function(t){return r("li",{staticClass:"page-item",class:{disabled:"divider"==t.key,active:t.key==e.current_page}},[t.key==e.current_page?r("span",{staticClass:"page-link"},[e._v(e._s(t.key))]):"divider"===t.key?r("span",{staticClass:"page-link"},[e._v(e._s(t.item))]):r("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.fetchData(t.item)}}},[e._v(e._s(t.key))])])}),e._v(" "),r("li",{staticClass:"page-item",class:{disabled:e.current_page==e.last_page}},[e.current_page<e.last_page?r("a",{staticClass:"page-link",attrs:{href:"#",rel:"next"},domProps:{innerHTML:e._s(e.config.next_button_text)},on:{click:function(t){return t.preventDefault(),e.fetchData(e.nextPageUrl)}}}):r("span",{staticClass:"page-link",domProps:{innerHTML:e._s(e.config.next_button_text)}})])],2)},i=[],a={render:n,staticRenderFns:i};t.a=a}])});